(function(){function b(a){this.element=a;this.w=a.querySelector("img");this.a=a.querySelector(".timer");this.timestamp=a.getAttribute("data-timestamp");this.interval=null;this.A=this.a.querySelectorAll(".value");this.o=this.a.querySelector(".days");this.s=this.a.querySelector(".hours");this.u=this.a.querySelector(".minutes");this.v=this.a.querySelector(".seconds")}function d(a){a=a.target.nextElementSibling;a.style.display="block"==a.style.display?"none":"block"}var e=new Event("changeColor");b.prototype.j=
function(){var a=this;this.h();this.interval=setInterval(function(){a.update()},1E3);setTimeout(function(){a.timestamp=a.element.getAttribute("data-timestamp");a.i();a.j()},3E5)};b.prototype.m=function(){var a=this.timestamp-Math.floor((new Date).getTime()/1E3);if(a<pastLimit){this.i();var b=document.querySelector("#past-events");b.style.display="block";b.appendChild(this.element);this.w.addEventListener("click",d);document.dispatchEvent(e)}a={b:Math.max(Math.floor(a/86400),0),c:Math.max(Math.floor(a/
3600)%24,0),f:Math.max(Math.floor(a/60)%60,0),g:Math.max(Math.floor(a%60),0)};10>a.b&&(a.b="0"+a.b);10>a.c&&(a.c="0"+a.c);10>a.f&&(a.f="0"+a.f);10>a.g&&(a.g="0"+a.g);return a};b.prototype.update=function(){var a=this.m();this.o.innerHTML=a.b;this.s.innerHTML=a.c;this.u.innerHTML=a.f;this.v.innerHTML=a.g};b.prototype.h=function(){this.A.forEach(function(a){a.innerHTML=""})};b.prototype.i=function(){this.h();clearInterval(this.interval)};document.addEventListener("DOMContentLoaded",function(){var a=
document.querySelector("body"),c=document.querySelector("#countdowns");c.querySelectorAll(".countdown").forEach(function(a){(new b(a)).j()});setInterval(function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&200==this.status)for(var a=JSON.parse(this.responseText),b=0;b<a.l.length;b++)document.querySelector("#countdown-"+a.l[b].id).setAttribute("data-timestamp",a.l[b].timestamp)};a.open("GET","data.json?time="+(new Date).getTime()/1E3,!0);a.send()},9E5);document.addEventListener("changeColor",
function(){var b=c.querySelectorAll(".countdown");if(0>=b.length)(b=c.querySelector(".headline"))&&b.remove();else{for(;0<a.classList.length;)a.classList.remove(a.classList.item(0));a.classList.add(b[0].getAttribute("data-color"))}},!1);document.dispatchEvent(e);document.querySelector("#past-events").querySelectorAll("img").forEach(function(a){a.addEventListener("click",d)})})})();
